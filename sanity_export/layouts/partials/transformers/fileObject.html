{{ $s := newScratch }}
{{ $s.Set "data" dict }}
{{ $file := "" }}
{{ $skip_assets := site.Params.skip_assets }}
{{ if (not $skip_assets) }}
  {{ if reflect.IsMap $ }}
    {{ $file = .file | default .image }}
    {{ with $.title }}
      {{ $s.SetInMap "data" "title" . }}
    {{ end }}
    {{ with $.date }}
      {{ $s.SetInMap "data" "date" . }}
    {{ end }}
  {{ else }}
    {{ $file = $ }}
  {{ end }}
  
  {{ with $file }}
    {{ with partialCached "transformers/file" . . }}
      {{ range $k, $v := . }}
        {{ $s.SetInMap "data" $k $v }}
      {{ end }}
    {{ end }}
  {{ end }}
{{ end }}


{{ return $s.Get "data" }}